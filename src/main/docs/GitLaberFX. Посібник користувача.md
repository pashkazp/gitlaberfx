# GitLaberFX: Посібник користувача

Ласкаво просимо до GitLaberFX — вашого настільного помічника для ефективного управління гілками в проєктах GitLab. Цей посібник допоможе вам встановити, налаштувати та використовувати всі можливості програми.
## 1. Вступ

**GitLaberFX** — це десктопний додаток, створений для розробників та тімлідів, які прагнуть підтримувати чистоту та порядок у своїх репозиторіях GitLab. Програма дозволяє легко знаходити та масово видаляти або архівувати застарілі, змерджені та непотрібні гілки.

### 1.1. Основні можливості

- **Перегляд проєктів та гілок:** Зручний доступ до списку проєктів та їхніх гілок.

- **Гнучка фільтрація гілок:** Використання регулярних виразів (масок) для швидкого масового вибору гілок.

- **Розширена фільтрація за датою:** Вибір гілок на основі дати останнього коміту, з використанням критеріїв "до" та "після".

- **Надійний аналіз змердженості:** Точне визначення статусу змердженості гілок відносно обраної цільової гілки шляхом перевірки наявності останнього коміту вихідної гілки в історії цільової гілки.

- **Гнучкі операції з гілками:** Вибір між безпечним архівуванням та безповоротним видаленням гілок.

- **Масові операції:** Інструменти для видалення/архівації обраних, старих змерджених та незмерджених гілок.

- **Надійна обробка помилок:** Автоматичні механізми відкату для невдалих операцій, що запобігають неузгодженості даних.

- **Багатомовність:** Інтерфейс доступний англійською та українською мовами з можливістю динамічного перемикання.
## 2. Встановлення та перший запуск

### 2.1. Системні вимоги

Для роботи програми на вашому комп'ютері мають бути встановлені:

- **Java 17** або новіша версія
- **Maven** (потрібен лише для запуску з вихідного коду)

### 2.2. Запуск програми

Програму можна запустити двома способами:

#### 2.2.1. Запуск з вихідного коду через Maven

Для запуску програми з вихідного коду:

- **Звичайний запуск:** 
  ```
  mvn clean antrun:run@run-without-debug
  ```

- **Запуск з відлагодженням:** 
  ```
  mvn clean antrun:run@run-with-debug
  ```

#### 2.2.2. Запуск з дистрибутиву

Якщо ви використовуєте готовий дистрибутив:

Створіть дистрибутив командою:

    mvn clean package -Ppackage-app

Розпакуйте отриманий архів: target/gitlaberfx-*.zip

- **Windows:** 
  Запустіть файл `bin/gitlaberfx.bat`

- **Linux/macOS:** 
  Відкрийте термінал, перейдіть до розпакованої директорії дистрибутиву і виконайте команду:
  ```
  bin/gitlaberfx
  ```

### 2.3. Перший запуск

При першому запуску програма створить директорію для зберігання конфігурації та логів у вашій домашній папці:

- **Windows:** `%USERPROFILE%/.config/gitlaberfx`
- **Linux/macOS:** `~/.config/gitlaberfx`
## 3. Початкове налаштування

При першому запуску, або якщо конфігурація відсутня, додаток покаже попередження. Для початку роботи необхідно налаштувати з'єднання з вашим GitLab.

### 3.1. Налаштування з'єднання

1. У головному меню оберіть **Файл -> Налаштування**.
2. У вікні, що відкрилося, заповніть **обов'язкові поля**:
   - **URL GitLab:** Повна адреса вашого сервера GitLab (наприклад, https://gitlab.com або https://gitlab.mycompany.com).
   - **API Ключ:** Ваш персональний токен доступу (Access Token) з правами api.

> **Як отримати API Ключ?**  
> У вашому профілі GitLab перейдіть до Preferences -> Access Tokens. Створіть новий токен, надавши йому ім'я та обравши scopes (дозволи). Для роботи програми достатньо прав зі скоупу **api**. Скопіюйте згенерований токен.

### 3.2. Додаткові параметри

- **Префікс для архівних гілок:** Вкажіть префікс, який буде додаватися до назви гілки при архівації (за замовчуванням `archive/`).

### 3.3. Завершення налаштування

1. Натисніть кнопку **"Тестувати з'єднання"**, щоб перевірити коректність введених даних.
2. Збережіть налаштування, натиснувши кнопку **"Зберегти"**.

Після збереження коректних налаштувань програма автоматично завантажить список доступних вам проєктів.
## 4. Огляд інтерфейсу

Головне вікно програми складається з кількох ключових елементів:

### 4.1. Панель вибору

- **Проєкт:** Випадаючий список для вибору активного проєкту.
- **Цільова гілка:** Випадаючий список для вибору гілки, відносно якої буде перевірятись статус змердженості (зазвичай master або develop).

### 4.2. Панель інструментів

- **Оновити списки:** Дві кнопки для примусового оновлення списку проєктів та гілок поточного проєкту.
- **Керування вибором:** Кнопки "Вибрати все", "Зняти вибір", "Інвертувати вибір" для швидкої роботи з таблицею.

### 4.3. Панелі фільтрації

#### 4.3.1. Фільтрація за регулярним виразом

Розташована безпосередньо над таблицею, ця панель дозволяє швидко вибирати групи гілок.

- **Поле для маски:** Введіть сюди регулярний вираз (наприклад, feature/.*).
- **Кнопка + (Включити у вибір):** Встановлює прапорець "вибрано" для всіх гілок, що відповідають масці.
- **Кнопка - (Виключити з вибору):** Знімає прапорець "вибрано" для всіх гілок, що відповідають масці.

#### 4.3.2. Фільтрація за датою

Розташована поруч з панеллю фільтрації за маскою, дозволяє вибирати гілки за датою останнього коміту.

- **Поле діапазону дат:** Відображає обраний діапазон дат для фільтрації.
- **Кнопка з іконкою календаря:** Відкриває діалог вибору діапазону дат "Після" та/або "До".
- **Кнопка + (Включити у вибір):** Встановлює прапорець "вибрано" для всіх гілок, що відповідають обраному діапазону дат.
- **Кнопка - (Виключити з вибору):** Знімає прапорець "вибрано" для всіх гілок, що відповідають обраному діапазону дат.

### 4.4. Таблиця гілок

Відображає список усіх гілок обраного проєкту.

- **Стовпці:** 
  - Вибрати (чекбокс)
  - Назва гілки
  - Останній коміт
  - Змерджено (загальний статус)
  - Змерджено в цільову (✔, якщо гілка влита в обрану цільову)
  - Захищена та інші

### 4.5. Панель операцій

- **Видалити вибрані:** Готує до видалення/архівації всі гілки, відмічені чекбоксами.
- **Видалити змерджені:** Готує до видалення/архівації гілки, які були змерджені в цільову і є старішими за обрану дату.
- **Видалити не змерджені:** Готує до видалення/архівації старі неактивні гілки, які не були змерджені в цільову.

> **Важливо:** Усі ці кнопки відкривають **єдине діалогове вікно**, де ви можете фінально скоригувати список та обрати між видаленням та архівацією.

### 4.6. Статус-бар

- **Лічильник гілок:** Показує кількість обраних та загальну кількість гілок.
- **Рядок стану:** Відображає поточну дію програми.
- **Індикатор прогресу:** Заповнюється під час виконання тривалих фонових операцій.
## 5. Основні сценарії використання

### 5.1. Швидкий вибір гілок за допомогою фільтра

Цей інструмент ідеально підходить для роботи з великою кількістю гілок.

1. Переконайтесь, що список гілок завантажено.
2. У **полі фільтрації** введіть маску (регулярний вираз). Наприклад:
   - `archive/.*` — щоб знайти всі гілки в архіві.
   - `feature/PLD` — щоб знайти всі гілки, пов'язані з певним завданням.
3. Натисніть **+**, щоб додати знайдені гілки до вибору, або **-**, щоб зняти вибір з них.

> **Порада:** Ви можете застосовувати кілька фільтрів послідовно. Наприклад, спочатку вибрати всі гілки (`.*`), а потім виключити архівні (`archive/.*`).

### 5.2. Фільтрація гілок за датою

Ця функція дозволяє вибирати гілки на основі дати їх останнього коміту:

1. Знайдіть панель фільтрації за датою над таблицею гілок.
2. Натисніть кнопку з іконкою календаря, щоб відкрити діалог вибору діапазону дат.
3. У діалозі ви можете вказати:
   - **Після:** Дата, після якої був зроблений останній коміт у гілці.
   - **До:** Дата, до якої був зроблений останній коміт у гілці.
4. Після вибору дат, натисніть **OK** для підтвердження.
5. Тепер ви можете:
   - Натиснути кнопку **+**, щоб вибрати всі гілки, що відповідають вказаному діапазону дат.
   - Натиснути кнопку **-**, щоб зняти вибір з гілок, що відповідають вказаному діапазону дат.

> **Примітка:** Ця функція особливо корисна для виявлення старих гілок, які можна безпечно архівувати або видаляти.

### 5.3. Аналіз та підготовка до операції

1. У випадаючому списку **"Проєкт"** оберіть потрібний репозиторій. Програма автоматично завантажить список його гілок.
2. У списку **"Цільова гілка"** оберіть гілку, яка є основною у вашому робочому процесі (наприклад, master).
3. Програма запустить фоновий процес перевірки. Після його завершення у стовпці **"Змерджено в цільову"** з'являться позначки (✔) навпроти гілок, які вже були влиті у вашу цільову гілку.

### 5.4. Виконання операції (видалення або архівація)

Наступні кроки є однаковими для всіх кнопок операцій ("Видалити вибрані", "Видалити змерджені" тощо).

1. Натисніть одну з кнопок операцій (напр., **"Видалити змерджені"**). Якщо потрібно, оберіть дату.
2. Програма покаже вам **діалогове вікно підтвердження** зі списком гілок, що відповідають критеріям. У цьому вікні ви можете:
   - **Остаточно скоригувати список:** зняти або встановити прапорці для окремих гілок.
   - **Використати фільтр:** додатково уточнити вибір за допомогою маски прямо в діалоговому вікні.
   - **Обрати дію:** Внизу вікна встановіть або зніміть прапорець **"Архівувати гілки"**. Залежно від вашого вибору, кнопка підтвердження змінить назву на **"Видалити"** або **"Архівувати"**.
3. Натисніть кнопку підтвердження для виконання обраної операції.

#### 5.4.1. Різниця між видаленням та архівацією

- **Видалення:** Гілка безповоротно видаляється з репозиторію GitLab.
- **Архівація:** Гілка не видаляється, а перейменовується шляхом додавання префіксу (напр., feature/task -> archive/feature/task). Це дозволяє зберегти історію, але прибрати гілку з активного списку розробки. Після архівації її назва в таблиці оновиться.

#### 5.4.2. Надійна обробка помилок

GitLaberFX забезпечує високий рівень надійності під час виконання операцій:

- Якщо під час архівації виникає помилка (наприклад, вдалося створити архівну гілку, але не вдалося видалити оригінальну), система автоматично виконує відкат змін, щоб запобігти неузгодженості даних.
- Усі операції та помилки детально логуються разом з SHA коміту гілки, що забезпечує покращену відстежуваність та спрощує діагностику проблем.
- У разі масових операцій, програма збирає інформацію про всі помилки та відображає їх у єдиному звіті після завершення операції.
## 6. Зміна мови

GitLaberFX підтримує можливість динамічної зміни мови інтерфейсу без перезапуску програми.

### 6.1. Процес зміни мови

1. Перейдіть до меню **Файл -> Налаштування**.
2. У випадаючому списку **"Мова"** оберіть бажану мову:
   - **English** (Англійська)
   - **Українська**
3. Натисніть кнопку **"Зберегти"**.

> **Примітка:** Інтерфейс програми миттєво оновиться на обрану мову зі збереженням поточного стану. Всі відкриті вікна, вибрані гілки та інші налаштування залишаться без змін.

---

Дякуємо, що користуєтесь GitLaberFX!
