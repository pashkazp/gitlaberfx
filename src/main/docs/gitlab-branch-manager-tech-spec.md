# Технічне завдання на розробку GitLab Branch Manager

## 1. Загальна інформація

### 1.1 Назва проекту
GitLab Branch Manager (gitlaberfxc)

### 1.2 Мета проекту
Розробка десктопного додатку для автоматизованого управління гілками в GitLab проектах, включаючи масове видалення змерджених та застарілих гілок.

### 1.3 Цільова платформа
- Windows 10/11
- Linux
- Java 17
- JavaFX

## 2. Функціональні вимоги

### 2.1 Управління проектами
- Додавання та конфігурування GitLab проектів
- Робота з одним активним проектом одночасно
- Збереження конфігурації проектів у файлах properties

### 2.2 Аутентифікація
- Підтримка двох методів аутентифікації:
  - API Token
  - Логін/пароль
- Збереження API Token у налаштуваннях після успішного тестування з'єднання
- Збереження логіну, запит паролю на початку кожної сесії
- Підтримка self-hosted GitLab інстансів

### 2.3 Робота з гілками
- Отримання списку всіх гілок проекту
- Підтримка вкладеної структури гілок (group/branch-name)
- Визначення та збереження головної гілки (main/master)
- Відображення інформації про гілки:
  - Назва гілки
  - Автор останнього коміту
  - Дата останнього коміту
  - Кількість комітів
  - Статус (змерджена/незмерджена)
  - Protected статус

### 2.4 Інтерфейс списку гілок
- Таблиця з чекбоксами для вибору гілок
- Операції масового вибору:
  - Вибрати все
  - Скасувати вибір
  - Інвертувати вибір
- Фільтрація/пошук за:
  - Назвою гілки
  - Автором
  - Датою
- Оновлення списку зі збереженням вибору

### 2.5 Операції з гілками
1. **Безумовне видалення**
   - Підтвердження операції
   - Видалення обраних гілок

2. **Видалення змерджених гілок**
   - Запит граничної дати
   - Перевірка змердженості в головну гілку
   - Формування списку для видалення
   - Підтвердження з можливістю редагування списку
   - Видалення підтверджених гілок

3. **Видалення незмерджених старих гілок**
   - Запит граничної дати
   - Виявлення гілок без активності після дати
   - Формування списку для видалення
   - Підтвердження з можливістю редагування списку
   - Видалення підтверджених гілок

4. **Управління виключеннями**
   - Додавання гілок у список заброньованих
   - Збереження списку в налаштуваннях
   - Додаткове підтвердження при видаленні заброньованих гілок

### 2.6 Batch операції
- Підтримка масових операцій (100+ гілок)
- Progress bar для відображення прогресу
- Можливість скасування операції
- Обробка помилок окремих операцій без зупинки всього процесу

### 2.7 Захист гілок
- Визначення protected branches
- Заборона видалення protected branches
- Візуальне виділення protected branches

## 3. Технічні вимоги

### 3.1 Архітектура
- Maven проект
- Java 17
- JavaFX для UI
- Apache HttpClient для роботи з GitLab API
- MVC/MVP архітектурний патерн

### 3.2 Збереження налаштувань
- Формат: properties файли
- Локація: `./configs/` (відносно каталогу запуску)
- Структура файлів:
  - `application.properties` - загальні налаштування
  - `projects.properties` - конфігурація проектів
  - `logging.properties` - налаштування логування

### 3.3 Логування
- Використання SLF4J + Logback
- Рівні: DEBUG, INFO, WARN, ERROR
- Rolling file appender з щоденною ротацією
- Збереження архівів мінімум 6 місяців
- Локація: `./logs/`

### 3.4 Локалізація
- Підтримка української та англійської мов
- ResourceBundle для зберігання перекладів
- Можливість перемикання мови в налаштуваннях

### 3.5 Запуск та відлагодження
- Команда запуску: `mvn clean package antrun:run@run-with-debug`
- Підтримка remote debugging через JVM Debug Port

## 4. Нефункціональні вимоги

### 4.1 Продуктивність
- Обробка списків з 1000+ гілок без затримок UI
- Асинхронне виконання API запитів
- Пагінація для великих списків

### 4.2 Надійність
- Обробка помилок мережі
- Повторні спроби при тимчасових помилках
- Валідація вхідних даних

### 4.3 Юзабіліті
- Інтуїтивно зрозумілий інтерфейс
- Tooltips для складних функцій
- Keyboard shortcuts для основних операцій

## 5. Тестування

### 5.1 Unit тести
- JUnit 5
- Покриття коду мінімум 80%
- Тестування бізнес-логіки

### 5.2 Integration тести
- Mockito для GitLab API
- Тестування всіх API операцій
- Тестування збереження/читання налаштувань

### 5.3 UI тести
- TestFX
- Тестування основних сценаріїв використання
- Тестування обробки помилок в UI

## 6. Структура проекту

```
gitlaberfxc/
├── src/
│   ├── main/
│   │   ├── java/
│   │   │   └── com/depavlo/gitlaberfxc/
│   │   │       ├── api/          # GitLab API клієнт
│   │   │       ├── model/        # Доменні моделі
│   │   │       ├── service/      # Бізнес-логіка
│   │   │       ├── ui/           # JavaFX контролери та вʼюхи
│   │   │       ├── config/       # Конфігурація
│   │   │       └── util/         # Утиліти
│   │   └── resources/
│   │       ├── fxml/             # FXML файли
│   │       ├── i18n/             # Файли локалізації
│   │       └── logback.xml       # Конфігурація логування
│   └── test/
│       ├── java/                 # Тести
│       └── resources/            # Тестові ресурси
├── configs/                      # Конфігураційні файли
├── logs/                         # Логи
├── pom.xml                       # Maven конфігурація
└── README.md                     # Документація
```

## 7. Залежності

### 7.1 Основні залежності
- JavaFX 17+
- Apache HttpClient 5.x
- Jackson для JSON
- SLF4J + Logback
- Apache Commons (Lang, IO, Configuration)

### 7.2 Тестові залежності
- JUnit 5
- Mockito
- TestFX
- WireMock (для mock GitLab API)

## 8. GitLab API endpoints

Необхідні API endpoints:
- GET /api/v4/projects/:id - інформація про проект
- GET /api/v4/projects/:id/repository/branches - список гілок
- GET /api/v4/projects/:id/repository/branches/:branch - інформація про гілку
- DELETE /api/v4/projects/:id/repository/branches/:branch - видалення гілки
- GET /api/v4/projects/:id/repository/compare - порівняння гілок

## 9. Етапи розробки

### Етап 1: Базова інфраструктура (1-2 тижні)
- Налаштування проекту
- Базова структура
- Конфігурація логування
- Система налаштувань

### Етап 2: GitLab API інтеграція (1-2 тижні)
- API клієнт
- Аутентифікація
- Базові операції з гілками

### Етап 3: UI розробка (2-3 тижні)
- Основне вікно
- Список гілок
- Діалоги операцій
- Локалізація

### Етап 4: Бізнес-логіка (2-3 тижні)
- Аналіз гілок
- Операції видалення
- Batch обробка
- Управління виключеннями

### Етап 5: Тестування та оптимізація (1-2 тижні)
- Unit тести
- Integration тести
- UI тести
- Оптимізація продуктивності

### Етап 6: Документація та фіналізація (1 тиждень)
- Користувацька документація
- Технічна документація
- README
- Підготовка до релізу
